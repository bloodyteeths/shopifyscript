# ProofKit Billing Configuration
# Copy this file to .env and fill in your actual values

# ===========================================
# STRIPE CONFIGURATION (WordPress Billing)
# ===========================================

# Stripe API Keys (get from Stripe Dashboard)
STRIPE_SECRET_KEY=sk_test_51...  # Use sk_live_ for production
STRIPE_PUBLIC_KEY=pk_test_51...  # Use pk_live_ for production

# Stripe Webhook Secret (from webhook endpoint configuration)
STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe Price IDs for each tier (create in Stripe Dashboard)
STRIPE_PRICE_STARTER=price_1...
STRIPE_PRICE_PRO=price_1...
STRIPE_PRICE_GROWTH=price_1...
STRIPE_PRICE_ENTERPRISE=price_1...

# ===========================================
# SHOPIFY CONFIGURATION (Embedded App Billing)
# ===========================================

# Shopify App Credentials
SHOPIFY_API_KEY=your_shopify_api_key
SHOPIFY_API_SECRET=your_shopify_api_secret

# Shopify Billing Settings
SHOPIFY_BILLING_TEST=true  # Set to false for production
SHOPIFY_WEBHOOK_SECRET=your_shopify_webhook_secret

# Shopify Scopes (required for billing)
SHOPIFY_SCOPES=read_products,write_products,read_analytics,write_pixels

# ===========================================
# DATABASE CONFIGURATION
# ===========================================

# Database connection for storing subscription data
DATABASE_URL=postgresql://user:password@localhost:5432/proofkit
# Or separate components:
DB_HOST=localhost
DB_PORT=5432
DB_NAME=proofkit
DB_USER=proofkit_user
DB_PASSWORD=your_db_password

# ===========================================
# EMAIL CONFIGURATION
# ===========================================

# Email service for billing notifications
EMAIL_SERVICE=sendgrid  # or mailgun, ses, smtp
EMAIL_API_KEY=your_email_api_key
EMAIL_FROM=billing@proofkit.com
EMAIL_FROM_NAME=ProofKit Billing

# ===========================================
# SECURITY CONFIGURATION
# ===========================================

# JWT Secret for session management
JWT_SECRET=your_super_secret_jwt_key_here

# Encryption key for sensitive data
ENCRYPTION_KEY=your_32_character_encryption_key

# HMAC keys for webhook verification
WEBHOOK_HMAC_SECRET=your_webhook_hmac_secret

# ===========================================
# RATE LIMITING & FEATURES
# ===========================================

# Rate limiting configuration
RATE_LIMIT_WINDOW_MS=3600000  # 1 hour in milliseconds
RATE_LIMIT_STARTER=100        # requests per window for Starter tier
RATE_LIMIT_PRO=500           # requests per window for Pro tier
RATE_LIMIT_GROWTH=2000       # requests per window for Growth tier
RATE_LIMIT_ENTERPRISE=-1     # unlimited for Enterprise

# Feature flags
ENABLE_ANNUAL_BILLING=false
ENABLE_USAGE_BASED_BILLING=false
ENABLE_ENTERPRISE_FEATURES=true
ENABLE_TRIAL_EXTENSIONS=false

# ===========================================
# MONITORING & ANALYTICS
# ===========================================

# Analytics service
ANALYTICS_SERVICE=mixpanel  # or segment, google_analytics
ANALYTICS_API_KEY=your_analytics_key

# Error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Logging level
LOG_LEVEL=info  # debug, info, warn, error

# ===========================================
# BUSINESS CONFIGURATION
# ===========================================

# Company information for invoices
COMPANY_NAME=ProofKit, Inc.
COMPANY_ADDRESS=123 Business St, Suite 100, City, ST 12345
COMPANY_TAX_ID=12-3456789

# Business rules
DEFAULT_TRIAL_DAYS=14
GRACE_PERIOD_DAYS=3
MAX_FAILED_PAYMENTS=3
DUNNING_EMAIL_SCHEDULE=1,3,7  # days after failed payment

# Currency settings
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP,CAD,AUD

# ===========================================
# INTEGRATION URLS
# ===========================================

# Application URLs
APP_URL=https://your-domain.com
SHOPIFY_APP_URL=https://your-shopify-app.herokuapp.com
WORDPRESS_PLUGIN_URL=https://your-domain.com/wp-admin

# Webhook endpoints
STRIPE_WEBHOOK_URL=https://your-domain.com/api/billing/webhooks/stripe
SHOPIFY_WEBHOOK_URL=https://your-domain.com/api/billing/webhooks/shopify

# Success/Cancel URLs for Stripe Checkout
STRIPE_SUCCESS_URL=https://your-domain.com/billing/success
STRIPE_CANCEL_URL=https://your-domain.com/billing/cancel

# ===========================================
# DEVELOPMENT & TESTING
# ===========================================

# Development mode settings
NODE_ENV=development  # development, staging, production
DEBUG_BILLING=true
MOCK_PAYMENTS=false   # Set to true for testing without real payments

# Test data
TEST_CUSTOMER_EMAIL=test@example.com
TEST_SHOP_DOMAIN=test-shop.myshopify.com

# API endpoints for testing
API_BASE_URL=http://localhost:3001
FRONTEND_BASE_URL=http://localhost:3000

# ===========================================
# BACKUP & DISASTER RECOVERY
# ===========================================

# Backup configuration
BACKUP_PROVIDER=aws_s3  # or gcs, azure
BACKUP_BUCKET=proofkit-billing-backups
BACKUP_REGION=us-east-1
BACKUP_ACCESS_KEY=your_backup_access_key
BACKUP_SECRET_KEY=your_backup_secret_key

# Data retention
SUBSCRIPTION_DATA_RETENTION_DAYS=2555  # 7 years
PAYMENT_DATA_RETENTION_DAYS=2555       # 7 years
LOG_RETENTION_DAYS=90

# ===========================================
# COMPLIANCE & SECURITY
# ===========================================

# PCI DSS Compliance
PCI_COMPLIANT_LOGGING=true
MASK_SENSITIVE_DATA=true

# GDPR Compliance
GDPR_ENABLED=true
DATA_PROCESSING_LEGAL_BASIS=contract
PRIVACY_POLICY_URL=https://your-domain.com/privacy
TERMS_OF_SERVICE_URL=https://your-domain.com/terms

# Regional settings
DEFAULT_TIMEZONE=UTC
TAX_CALCULATION_SERVICE=taxjar  # or avalara, stripe_tax
TAX_API_KEY=your_tax_api_key

# ===========================================
# PERFORMANCE & SCALING
# ===========================================

# Redis for caching and sessions
REDIS_URL=redis://localhost:6379
REDIS_SESSION_PREFIX=proofkit:session:
REDIS_CACHE_PREFIX=proofkit:cache:

# Queue configuration for background jobs
QUEUE_PROVIDER=redis  # or aws_sqs, google_cloud_tasks
QUEUE_URL=redis://localhost:6379

# CDN for static assets
CDN_URL=https://cdn.your-domain.com
CDN_API_KEY=your_cdn_api_key

# Load balancing
LOAD_BALANCER_IP=your_load_balancer_ip
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_INTERVAL=30

# ===========================================
# NOTIFICATIONS & ALERTS
# ===========================================

# Slack notifications for billing events
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...
SLACK_CHANNEL=#billing-alerts

# SMS notifications for critical events
SMS_PROVIDER=twilio  # or aws_sns
SMS_API_KEY=your_sms_api_key
SMS_FROM_NUMBER=+1234567890
ADMIN_PHONE_NUMBERS=+1234567890,+0987654321

# ===========================================
# FEATURE-SPECIFIC SETTINGS
# ===========================================

# AI Copywriter settings
AI_PROVIDER=openai  # or anthropic, google
AI_API_KEY=your_ai_api_key
AI_MODEL=gpt-4
AI_MAX_TOKENS=1000

# Google Ads integration
GOOGLE_ADS_DEVELOPER_TOKEN=your_developer_token
GOOGLE_ADS_CLIENT_ID=your_client_id
GOOGLE_ADS_CLIENT_SECRET=your_client_secret

# Looker Studio integration
LOOKER_STUDIO_CLIENT_ID=your_looker_client_id
LOOKER_STUDIO_CLIENT_SECRET=your_looker_client_secret