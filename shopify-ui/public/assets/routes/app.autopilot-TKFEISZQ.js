import{a as O}from"/assets/_shared/chunk-QWU63J3U.js";import{d as L,g as B,h as _,i as z}from"/assets/_shared/chunk-SRKUJDA2.js";import{a as E}from"/assets/_shared/chunk-XT2LVRN2.js";import{c as x,i as k,m as A,n as N}from"/assets/_shared/chunk-XSX5DAMU.js";import{a as U,b as R}from"/assets/_shared/chunk-E6CPWDOJ.js";import{a as K}from"/assets/_shared/chunk-LBS3TYST.js";import{c as s}from"/assets/_shared/chunk-F3TRQT5X.js";var o=s(U());var H=s(E()),J=s(K()),j=s(O());var e=s(R());function T(){let{config:W,shopName:g}=A(),n=N(),w=x(),[c,h]=o.useState("protect"),[f,I]=o.useState("3.00"),[m,P]=o.useState("0.20"),[S,M]=o.useState(""),[D,$]=o.useState(!1),[l,r]=o.useState(""),[a,y]=o.useState(""),[p,b]=o.useState(!1),[d,C]=o.useState(null);o.useEffect(()=>{console.log("\u{1F3AD} State update:",{showScript:p,scriptCodeLength:a.length,shopName:d,toast:l})},[p,a,d,l]);let u=w.state==="submitting"&&w.formData?.get("actionType")==="generateScript";o.useEffect(()=>{let t=g||L();console.log("\u{1F3EA} Setting shop name:",{serverShopName:g,finalShopName:t}),C(t),$(B())},[g]);let F=t=>{C(t),$(!1),_(),r(`Shop configured: ${t}.myshopify.com`)};o.useEffect(()=>{console.log("\u{1F3AF} Action data received:",n),n&&(n.success?(console.log(`\u2705 Script received: ${n.script?.length||0} chars`),typeof window<"u"&&(localStorage.setItem("proofkit_generated_script",n.script),localStorage.setItem("proofkit_script_meta",JSON.stringify({size:n.size,shopName:n.shopName,timestamp:Date.now()}))),y(n.script),b(!0),r(`Complete ${n.size}KB script generated for ${n.shopName}`)):(console.error("\u274C Script generation failed:",n),r("Error: "+n.error)))},[n]),o.useEffect(()=>{if(console.log("\u{1F50D} Checking for stored script on page load..."),typeof window<"u"){let t=localStorage.getItem("proofkit_generated_script"),v=localStorage.getItem("proofkit_script_meta");if(console.log("\u{1F4E6} localStorage check:",{hasScript:!!t,hasMeta:!!v,scriptLength:t?.length||0}),t&&v)try{let i=JSON.parse(v);console.log("\u{1F4CB} Stored script meta:",i);let G=Date.now()-60*60*1e3;i.timestamp>G?(console.log(`\u{1F4DC} Loading stored script: ${t.length} chars`),y(t),b(!0),r(`Loaded ${i.size}KB script for ${i.shopName}`)):(console.log("\u23F0 Stored script expired, cleaning up"),localStorage.removeItem("proofkit_generated_script"),localStorage.removeItem("proofkit_script_meta"))}catch(i){console.warn("Failed to parse stored script meta:",i)}else console.log("\u{1F4ED} No stored script found")}},[]);function Y(){let t=`Configuration:
Mode: ${c}
Budget: $${f}/day
CPC: $${m}
URL: ${S}
Shop: ${d||"unknown"}`;alert(`Autopilot would be enabled with:

${t}

In production, this would start the automation.`),r("Demo: Configuration shown (would enable in production)")}return(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{children:"\u{1F916} Autopilot"}),D&&(0,e.jsx)(z,{onSetupComplete:F,showOnlyIfNeeded:!0}),l&&(0,e.jsx)("p",{children:l}),(0,e.jsxs)("section",{style:{border:"1px solid #eee",padding:12},children:[(0,e.jsx)("h3",{children:"Goal"}),(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"radio",name:"goal",value:"protect",checked:c==="protect",onChange:()=>h("protect")})," ","Protect"]}),(0,e.jsx)("br",{}),(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"radio",name:"goal",value:"grow",checked:c==="grow",onChange:()=>h("grow")})," ","Grow"]}),(0,e.jsx)("br",{}),(0,e.jsxs)("label",{children:[(0,e.jsx)("input",{type:"radio",name:"goal",value:"scale",checked:c==="scale",onChange:()=>h("scale")})," ","Scale"]})]}),(0,e.jsxs)("section",{style:{border:"1px solid #eee",padding:12},children:[(0,e.jsx)("h3",{children:"Budget & CPC"}),(0,e.jsx)("input",{type:"number",step:"0.01",value:f,onChange:t=>I(t.target.value),placeholder:"$ per day"}),(0,e.jsx)("input",{type:"number",step:"0.01",value:m,onChange:t=>P(t.target.value),placeholder:"Max CPC"})]}),(0,e.jsxs)("section",{style:{border:"1px solid #eee",padding:12},children:[(0,e.jsx)("h3",{children:"Landing URL"}),(0,e.jsx)("input",{value:S,onChange:t=>M(t.target.value),placeholder:"https://example.com",style:{width:"100%"}})]}),(0,e.jsxs)("div",{style:{marginTop:8,padding:12,background:"#e7f3ff",borderRadius:4,marginBottom:16},children:[(0,e.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#0c5460"},children:"\u{1F916} Autopilot Status"}),(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,e.jsx)("span",{style:{background:"#28a745",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:"\u2705 ALWAYS ON"}),(0,e.jsxs)("span",{children:["Automation running for:"," ",(0,e.jsx)("strong",{children:d||"Please configure shop"})]})]}),(0,e.jsxs)("div",{style:{fontSize:"14px",color:"#666"},children:["\u2022 Budget optimization: Active",(0,e.jsx)("br",{}),"\u2022 AI analysis: Running every 15min",(0,e.jsx)("br",{}),"\u2022 Performance monitoring: Continuous",(0,e.jsx)("br",{}),"\u2022 Script updates: Available below"]})]}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsxs)(k,{method:"post",children:[(0,e.jsx)("input",{type:"hidden",name:"actionType",value:"generateScript"}),(0,e.jsx)("input",{type:"hidden",name:"mode",value:c}),(0,e.jsx)("input",{type:"hidden",name:"budget",value:f}),(0,e.jsx)("input",{type:"hidden",name:"cpc",value:m}),(0,e.jsx)("input",{type:"hidden",name:"url",value:S}),(0,e.jsx)("button",{type:"submit",disabled:u,style:{background:u?"#6c757d":"#007bff",color:"white",padding:"12px 24px",border:"none",borderRadius:"4px",cursor:u?"not-allowed":"pointer",fontSize:"16px"},children:u?"\u{1F504} Generating...":"\u{1F504} Generate Current Script"})]})}),console.log("\u{1F5A5}\uFE0F Render check:",{showScript:p,scriptCodeLength:a.length}),p&&(0,e.jsxs)("section",{style:{border:"1px solid #eee",padding:12,marginTop:12},children:[(0,e.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,e.jsxs)("h3",{children:["Google Ads Script (",Math.round(a.length/1024),"KB)"]}),(0,e.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,e.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a).then(()=>{r("Script copied to clipboard!")}).catch(()=>{r("Copy failed - select text manually")})},style:{background:"#28a745",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u{1F4CB} Copy Script"}),(0,e.jsx)("button",{onClick:()=>{b(!1),y(""),typeof window<"u"&&(localStorage.removeItem("proofkit_generated_script"),localStorage.removeItem("proofkit_script_meta")),r("Script cleared")},style:{background:"#6c757d",color:"white",padding:"8px 16px",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u{1F5D1}\uFE0F Clear"})]})]}),(0,e.jsx)("textarea",{readOnly:!0,value:a,style:{width:"100%",height:300,fontFamily:"monospace",fontSize:"12px"},placeholder:"Script will appear here when loaded..."}),(0,e.jsxs)("ol",{children:[(0,e.jsx)("li",{children:"Google Ads \u2192 Tools \u2192 Bulk actions \u2192 Scripts \u2192 + New script"}),(0,e.jsx)("li",{children:"Paste, Authorize, then Preview first"}),(0,e.jsx)("li",{children:"If ok, Run once, then Schedule daily"})]})]})]})}export{T as default};
