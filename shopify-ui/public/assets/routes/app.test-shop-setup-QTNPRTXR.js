import{a as B,b as F,c as R,d as N,e as z,f as I,g as P,h as W,j as L}from"/assets/_shared/chunk-SRKUJDA2.js";import{a as E,b as g}from"/assets/_shared/chunk-E6CPWDOJ.js";import{c}from"/assets/_shared/chunk-F3TRQT5X.js";var h=c(E());var y=c(E());var o=c(g());function U({showInline:a=!1,onShopNameChange:S}){let[i,f]=y.useState(""),[s,b]=y.useState(!1),[t,x]=y.useState(""),[u,n]=y.useState("");y.useEffect(()=>{let r=N()||z();f(r);try{let v=process.env.TENANT_ID||"proofkit";if(r&&r!==v){let C=new URL(window.location.href);C.searchParams.get("shop")!==r&&(C.searchParams.set("shop",r),window.history.replaceState({},"",C.toString()))}}catch{}},[]);let l=()=>{if(x(""),n(""),!R(i)){x("Shop name must be 2-64 characters, alphanumeric with hyphens/underscores allowed");return}try{F(i),W(),n("Shop name saved successfully!"),b(!1),S?.(i),setTimeout(()=>n(""),3e3)}catch{x("Failed to save shop name. Please try again.")}},d=()=>{let r=N()||z();f(r),b(!1),x("")},m=()=>{I();let r=z();f(r),n("Shop name cleared, using default"),S?.(r),setTimeout(()=>n(""),3e3)};return a?(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",padding:"8px 12px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #e1e5e9"},children:[(0,o.jsx)("span",{style:{fontWeight:"bold",color:"#495057"},children:"Shop:"}),s?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("input",{type:"text",value:i,onChange:r=>f(r.target.value),onKeyPress:r=>r.key==="Enter"&&l(),style:{padding:"4px 8px",border:t?"1px solid #dc3545":"1px solid #007bff",borderRadius:"4px 0 0 4px",fontSize:"14px",width:"120px",fontFamily:"monospace",outline:"none"},placeholder:"shop-name",autoFocus:!0}),(0,o.jsx)("span",{style:{padding:"4px 8px",backgroundColor:"#e9ecef",border:t?"1px solid #dc3545":"1px solid #007bff",borderLeft:"none",borderRadius:"0 4px 4px 0",fontSize:"14px",color:"#666",fontFamily:"monospace"},children:".myshopify.com"})]}),(0,o.jsx)("button",{onClick:l,style:{padding:"4px 8px",background:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},children:"\u2713"}),(0,o.jsx)("button",{onClick:d,style:{padding:"4px 8px",background:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"\u2715"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("strong",{style:{color:"#007bff",fontFamily:"monospace"},children:[i,".myshopify.com"]}),(0,o.jsx)("button",{onClick:()=>b(!0),style:{padding:"2px 6px",background:"transparent",border:"1px solid #007bff",borderRadius:"4px",cursor:"pointer",fontSize:"12px",color:"#007bff"},children:"Edit"})]}),t&&(0,o.jsx)("span",{style:{color:"#dc3545",fontSize:"12px",backgroundColor:"#f8d7da",padding:"2px 6px",borderRadius:"4px",border:"1px solid #f5c6cb"},children:t}),u&&(0,o.jsx)("span",{style:{color:"#155724",fontSize:"12px",backgroundColor:"#d4edda",padding:"2px 6px",borderRadius:"4px",border:"1px solid #c3e6cb"},children:u})]}):(0,o.jsxs)("div",{style:{border:"1px solid #e1e5e9",borderRadius:"8px",padding:"16px",backgroundColor:"#f8f9fa",marginBottom:"16px"},children:[(0,o.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px",color:"#333"},children:"Shop Configuration"}),(0,o.jsx)("p",{style:{fontSize:"14px",color:"#666",marginBottom:"12px"},children:"Set your shop name to ensure proper tenant identification for all ProofKit features."}),(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px",fontSize:"16px",color:"#495057"},children:"Shopify Store URL"}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",maxWidth:"500px"},children:[(0,o.jsx)("input",{type:"text",value:i,onChange:r=>f(r.target.value),onKeyPress:r=>r.key==="Enter"&&l(),style:{padding:"12px 16px",border:t?"2px solid #dc3545":"2px solid #007bff",borderRadius:"6px 0 0 6px",fontSize:"16px",flex:1,fontFamily:"monospace",outline:"none",backgroundColor:"white"},placeholder:"your-shop-name"}),(0,o.jsx)("div",{style:{padding:"12px 16px",backgroundColor:"#f8f9fa",border:t?"2px solid #dc3545":"2px solid #007bff",borderLeft:"none",borderRadius:"0 6px 6px 0",fontSize:"16px",color:"#666",fontFamily:"monospace",whiteSpace:"nowrap"},children:".myshopify.com"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[(0,o.jsx)("button",{onClick:l,style:{padding:"12px 24px",background:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",boxShadow:"0 2px 8px rgba(40, 167, 69, 0.3)",transition:"all 0.2s ease"},children:"\u{1F4BE} Save Shop Name"}),(0,o.jsx)("button",{onClick:m,style:{padding:"12px 24px",background:"#6c757d",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",fontWeight:"bold"},children:"\u{1F504} Reset to Default"})]}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#6c757d",backgroundColor:"#f8f9fa",padding:"12px",borderRadius:"6px",border:"1px solid #e9ecef"},children:[(0,o.jsx)("strong",{children:"Examples:"}),' "proofkit", "my-store", "awesome-shop"',(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"Note:"}),' Enter only the part before ".myshopify.com"']})]})]}),t&&(0,o.jsx)("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",padding:"8px 12px",fontSize:"14px",marginBottom:"8px"},children:t}),u&&(0,o.jsx)("div",{style:{color:"#155724",backgroundColor:"#d4edda",border:"1px solid #c3e6cb",borderRadius:"4px",padding:"8px 12px",fontSize:"14px",marginBottom:"8px"},children:u}),(0,o.jsxs)("div",{style:{fontSize:"12px",color:"#666",fontStyle:"italic"},children:[(0,o.jsx)("strong",{children:"Note:"}),' This shop name will be used for all API calls and data isolation. Use your Shopify shop name without ".myshopify.com" (e.g., "proofkit" for "proofkit.myshopify.com").']})]})}var V=U;var w=c(E());var p=c(g());function A({value:a,onChange:S,onSave:i,placeholder:f="your-shop-name",disabled:s=!1,error:b,size:t="medium",showLabel:x=!0,autoFocus:u=!1}){let[n,l]=w.useState(""),[d,m]=w.useState(!0);w.useEffect(()=>{if(a.trim()){let k=R(a.trim());m(k),l(k?"":"Must be 2-64 characters, alphanumeric with hyphens/underscores allowed")}else m(!0),l("")},[a]);let r=k=>{k.key==="Enter"&&i&&d&&a.trim()&&i()},v=b||n,C=Boolean(v),T={small:{fontSize:"14px",padding:"6px 10px",height:"32px"},medium:{fontSize:"16px",padding:"12px 16px",height:"44px"},large:{fontSize:"18px",padding:"16px 20px",height:"52px"}}[t];return(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[x&&(0,p.jsx)("label",{style:{fontSize:t==="large"?"18px":t==="small"?"14px":"16px",fontWeight:"bold",color:"#495057",marginBottom:"4px"},children:"Shopify Store URL"}),(0,p.jsxs)("div",{style:{display:"flex",alignItems:"stretch",maxWidth:t==="large"?"600px":t==="small"?"320px":"500px"},children:[(0,p.jsx)("input",{type:"text",value:a,onChange:k=>S(k.target.value),onKeyPress:r,placeholder:f,disabled:s,autoFocus:u,style:{...T,border:C?"2px solid #dc3545":d&&a.trim()?"2px solid #28a745":"2px solid #007bff",borderRadius:"6px 0 0 6px",flex:1,fontFamily:"monospace",outline:"none",backgroundColor:s?"#f8f9fa":"white",color:s?"#6c757d":"#495057",transition:"border-color 0.2s ease"}}),(0,p.jsx)("div",{style:{...T,backgroundColor:s?"#e9ecef":"#f8f9fa",border:C?"2px solid #dc3545":d&&a.trim()?"2px solid #28a745":"2px solid #007bff",borderLeft:"none",borderRadius:"0 6px 6px 0",color:s?"#adb5bd":"#6c757d",fontFamily:"monospace",whiteSpace:"nowrap",display:"flex",alignItems:"center"},children:".myshopify.com"}),a.trim()&&(0,p.jsx)("div",{style:{display:"flex",alignItems:"center",paddingLeft:"8px",fontSize:t==="large"?"20px":"16px"},children:d?(0,p.jsx)("span",{style:{color:"#28a745"},children:"\u2713"}):(0,p.jsx)("span",{style:{color:"#dc3545"},children:"\u2717"})})]}),v&&(0,p.jsxs)("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",padding:t==="large"?"8px 12px":"6px 10px",fontSize:t==="large"?"14px":"13px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,p.jsx)("span",{children:"\u26A0\uFE0F"}),v]}),!v&&a.trim()&&d&&(0,p.jsxs)("div",{style:{color:"#155724",fontSize:t==="large"?"14px":"13px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,p.jsx)("span",{children:"\u2713"}),"Valid shop name: ",(0,p.jsxs)("strong",{children:[a,".myshopify.com"]})]}),!a.trim()&&(0,p.jsxs)("div",{style:{fontSize:t==="large"?"14px":"13px",color:"#6c757d",fontStyle:"italic"},children:[(0,p.jsx)("strong",{children:"Examples:"}),' "proofkit", "my-store", "awesome-shop"']})]})}var K=A;var e=c(g());function _(){let[a,S]=h.useState("banner"),[i,f]=h.useState(""),[s,b]=h.useState({stored:null,current:"proofkit",needsSetup:!0}),t=h.useCallback(()=>{b({stored:B(),current:N(),needsSetup:P()})},[]);h.useEffect(()=>{t()},[t]);let x=()=>{I(),t(),f("")},u=[{name:"Valid Names",values:["proofkit","my-store","test123","awesome_shop"]},{name:"Invalid Names",values:["","a","shop name","shop@name","-invalid","toolongshopnamethatexceeds64charactersandshouldbeinvalidaccordingtorules"]}];return(0,e.jsxs)("div",{style:{padding:"20px",maxWidth:"800px"},children:[(0,e.jsx)("h2",{children:"\u{1F9EA} Shop Setup Components Test"}),(0,e.jsxs)("div",{style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #e1e5e9"},children:[(0,e.jsx)("h3",{children:"Current Status"}),(0,e.jsxs)("div",{style:{fontFamily:"monospace",fontSize:"14px"},children:[(0,e.jsxs)("div",{children:["Stored Shop Name: ",(0,e.jsx)("strong",{children:s.stored||"null"})]}),(0,e.jsxs)("div",{children:["Current Shop Name: ",(0,e.jsx)("strong",{children:s.current})]}),(0,e.jsxs)("div",{children:["Setup Needed:"," ",(0,e.jsx)("strong",{style:{color:s.needsSetup?"#dc3545":"#28a745"},children:s.needsSetup?"YES":"NO"})]})]}),(0,e.jsx)("button",{onClick:x,style:{marginTop:"12px",padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u{1F5D1}\uFE0F Clear Storage (Reset Test)"}),(0,e.jsx)("button",{onClick:t,style:{marginTop:"12px",marginLeft:"8px",padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u{1F504} Refresh Status"})]}),(0,e.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,e.jsx)("label",{style:{display:"block",fontWeight:"bold",marginBottom:"8px"},children:"Select Component to Test:"}),(0,e.jsx)("div",{style:{display:"flex",gap:"12px"},children:[{key:"banner",label:"\u{1F3EA} Setup Banner"},{key:"config",label:"\u2699\uFE0F Shop Config"},{key:"input",label:"\u{1F4DD} Name Input"}].map(({key:n,label:l})=>(0,e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,e.jsx)("input",{type:"radio",name:"testMode",value:n,checked:a===n,onChange:d=>S(d.target.value)}),l]},n))})]}),(0,e.jsxs)("div",{style:{border:"2px solid #007bff",borderRadius:"8px",padding:"20px",marginBottom:"20px"},children:[(0,e.jsx)("h3",{children:"Component Preview"}),a==="banner"&&(0,e.jsx)(L,{onSetupComplete:n=>{console.log("Setup completed:",n),t()},showOnlyIfNeeded:!1}),a==="config"&&(0,e.jsx)(V,{showInline:!1,onShopNameChange:n=>{console.log("Shop name changed:",n),t()}}),a==="input"&&(0,e.jsxs)("div",{children:[(0,e.jsx)(K,{value:i,onChange:f,onSave:()=>{console.log("Save requested:",i)},size:"medium",autoFocus:!1}),(0,e.jsx)("button",{onClick:()=>console.log("Manual save:",i),style:{marginTop:"12px",padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Test Save"})]})]}),(0,e.jsxs)("div",{style:{backgroundColor:"#fff3cd",padding:"16px",borderRadius:"8px",border:"1px solid #ffeaa7"},children:[(0,e.jsx)("h3",{children:"Validation Testing"}),u.map(({name:n,values:l})=>(0,e.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,e.jsxs)("h4",{children:[n,":"]}),(0,e.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"8px"},children:l.map(d=>{let m=R(d);return(0,e.jsxs)("div",{style:{padding:"8px 12px",backgroundColor:m?"#d4edda":"#f8d7da",border:`1px solid ${m?"#c3e6cb":"#f5c6cb"}`,borderRadius:"4px",fontSize:"14px",fontFamily:"monospace"},children:[(0,e.jsxs)("div",{children:['"',d,'"']}),(0,e.jsx)("div",{style:{fontSize:"12px",marginTop:"4px"},children:m?"\u2705 Valid":"\u274C Invalid"})]},d)})})]},n))]})]})}var D=_;var O=c(g());function M(){return(0,O.jsx)(D,{})}export{M as default};
