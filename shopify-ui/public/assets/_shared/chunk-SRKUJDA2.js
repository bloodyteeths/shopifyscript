import{a as P,b as y}from"/assets/_shared/chunk-E6CPWDOJ.js";import{c as m}from"/assets/_shared/chunk-F3TRQT5X.js";var n="proofkit_shop_name";function g(){if(typeof window>"u")return null;try{return localStorage.getItem(n)}catch(t){return console.warn("Failed to read shop name from localStorage:",t),null}}function b(t){if(!(typeof window>"u")){if(!p(t))throw new Error("Invalid shop name provided");try{localStorage.setItem(n,t),localStorage.setItem(`${n}_user_set`,"true");try{document.cookie=`${n}=${encodeURIComponent(t)}; Path=/; Max-Age=31536000; SameSite=Lax`,document.cookie=`${n}_user_set=true; Path=/; Max-Age=31536000; SameSite=Lax`}catch{}}catch(r){console.warn("Failed to store shop name in localStorage:",r)}}}function p(t){if(!t||typeof t!="string")return!1;let r=t.trim();return/^[a-zA-Z0-9][a-zA-Z0-9\-_]{1,63}$/.test(r)}function A(){let t=g();return t&&p(t)?t:null}function v(){let t=g();return t&&p(t)?t:process.env.TENANT_ID||"proofkit"}function z(){if(!(typeof window>"u"))try{localStorage.removeItem(n),localStorage.removeItem(`${n}_user_set`);try{document.cookie=`${n}=; Path=/; Max-Age=0; SameSite=Lax`,document.cookie=`${n}_user_set=; Path=/; Max-Age=0; SameSite=Lax`}catch{}}catch(t){console.warn("Failed to clear shop name from localStorage:",t)}}function N(){if(typeof window>"u")return!1;try{if(sessionStorage.getItem("proofkit_setup_dismissed")==="true")return!1}catch{}let t=g();if(!t||!p(t))return!0;let r=process.env.TENANT_ID||"proofkit";return t===r&&!localStorage.getItem(`${n}_user_set`)}function w(){try{sessionStorage.setItem("proofkit_setup_dismissed","true")}catch{}}var s=m(P());var e=m(y());function R({onSetupComplete:t,showOnlyIfNeeded:r=!0,allowDismiss:l=!0}){let[i,u]=s.useState(""),[k,d]=s.useState(!1),[a,h]=s.useState(!1),[c,f]=s.useState(""),[x,_]=s.useState(!1);s.useEffect(()=>{let o=N();if(d(r?o:!0),o)u("");else{let E=v();u(E)}},[r]);let S=async()=>{f(""),h(!0);try{let o=i.trim();if(!o){f("Please enter your shop name");return}if(!p(o)){f("Shop name must be 2-64 characters, alphanumeric with hyphens/underscores allowed");return}b(o),_(!0),t?.(o),setTimeout(()=>{d(!1)},2e3)}catch{f("Failed to save shop name. Please try again.")}finally{h(!1)}},I=o=>{o.key==="Enter"&&S()},C=()=>{w(),d(!1)};return k?(0,e.jsxs)("div",{style:{backgroundColor:"#e7f3ff",border:"2px solid #007bff",borderRadius:"12px",padding:"24px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0, 123, 255, 0.15)",position:"relative"},children:[l&&!x&&(0,e.jsx)("button",{onClick:C,style:{position:"absolute",top:"12px",right:"12px",background:"transparent",border:"none",color:"#007bff",fontSize:"24px",cursor:"pointer",padding:"4px",borderRadius:"4px",lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",transition:"background-color 0.2s ease"},onMouseEnter:o=>o.currentTarget.style.backgroundColor="#f8f9fa",onMouseLeave:o=>o.currentTarget.style.backgroundColor="transparent",title:"Skip setup for now",children:"\u2715"}),x?(0,e.jsxs)("div",{style:{textAlign:"center",color:"#155724"},children:[(0,e.jsx)("div",{style:{fontSize:"48px",marginBottom:"12px"},children:"\u2705"}),(0,e.jsx)("h3",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"8px",color:"#155724"},children:"Setup Complete!"}),(0,e.jsxs)("p",{style:{fontSize:"16px",color:"#155724",margin:"0"},children:["ProofKit is now configured for:"," ",(0,e.jsxs)("strong",{children:[i,".myshopify.com"]})]})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"20px",marginBottom:"20px"},children:[(0,e.jsx)("div",{style:{fontSize:"48px",lineHeight:"1"},children:"\u{1F3EA}"}),(0,e.jsxs)("div",{style:{flex:1},children:[(0,e.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#0c5460",marginBottom:"8px",margin:"0 0 8px 0"},children:"Connect Your Shopify Store"}),(0,e.jsx)("p",{style:{fontSize:"16px",color:"#0c5460",marginBottom:"16px",lineHeight:"1.5",margin:"0"},children:"Enter your Shopify store name to set up ProofKit automation and tracking."})]})]}),(0,e.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",border:"1px solid #b8daff"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,maxWidth:"400px"},children:[(0,e.jsx)("input",{type:"text",value:i,onChange:o=>u(o.target.value),onKeyPress:I,placeholder:"your-shop-name",disabled:a,style:{padding:"12px 16px",fontSize:"16px",border:c?"2px solid #dc3545":"2px solid #007bff",borderRadius:"6px 0 0 6px",flex:1,outline:"none",fontFamily:"monospace",backgroundColor:a?"#f8f9fa":"white"},autoFocus:!0}),(0,e.jsx)("div",{style:{padding:"12px 16px",backgroundColor:"#f8f9fa",border:c?"2px solid #dc3545":"2px solid #007bff",borderLeft:"none",borderRadius:"0 6px 6px 0",fontSize:"16px",color:"#666",fontFamily:"monospace",whiteSpace:"nowrap"},children:".myshopify.com"})]}),(0,e.jsx)("button",{onClick:S,disabled:a||!i.trim(),style:{padding:"12px 24px",backgroundColor:a||!i.trim()?"#6c757d":"#28a745",color:"white",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"bold",cursor:a||!i.trim()?"not-allowed":"pointer",opacity:a||!i.trim()?.7:1,transition:"all 0.2s ease",boxShadow:a||!i.trim()?"none":"0 2px 8px rgba(40, 167, 69, 0.3)"},children:a?(0,e.jsx)(e.Fragment,{children:"\u23F3 Saving..."}):(0,e.jsx)(e.Fragment,{children:"\u{1F680} Save & Continue"})})]}),c&&(0,e.jsxs)("div",{style:{color:"#721c24",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"6px",padding:"12px 16px",fontSize:"14px",marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,e.jsx)("span",{children:"\u26A0\uFE0F"}),c]}),(0,e.jsxs)("div",{style:{fontSize:"14px",color:"#495057",lineHeight:"1.4"},children:[(0,e.jsx)("strong",{children:"Examples:"}),' "proofkit", "my-store", "awesome-shop"',(0,e.jsx)("br",{}),(0,e.jsx)("strong",{children:"Note:"}),' Enter only the part before ".myshopify.com"']})]}),(0,e.jsx)("div",{style:{marginTop:"16px",padding:"16px",backgroundColor:"#fff3cd",borderRadius:"6px",border:"1px solid #ffeaa7"},children:(0,e.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,e.jsx)("span",{style:{fontSize:"20px"},children:"\u{1F4A1}"}),(0,e.jsxs)("div",{style:{fontSize:"14px",color:"#856404",lineHeight:"1.4"},children:[(0,e.jsx)("strong",{children:"Why do we need this?"}),(0,e.jsx)("br",{}),"ProofKit uses your shop name to:",(0,e.jsxs)("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[(0,e.jsx)("li",{children:"Generate personalized Google Ads scripts"}),(0,e.jsx)("li",{children:"Track your store's performance data"}),(0,e.jsx)("li",{children:"Ensure proper tenant isolation for multi-store setups"})]})]})]})})]})]}):null}var F=R;export{g as a,b,p as c,A as d,v as e,z as f,N as g,w as h,R as i,F as j};
