{
  "version": 2,
  "installCommand": "npm i --no-audit --no-fund",
  "buildCommand": "npm run build",
  "builds": [
    {
      "src": "api/index.js",
      "use": "@vercel/node",
      "config": {
        "maxLambdaSize": "50mb",
        "runtime": "nodejs18.x"
      }
    },
    {
      "src": "public/**",
      "use": "@vercel/static"
    }
  ],
  "routes": [
    {
      "src": "/build/(.*)",
      "dest": "/public/build/$1",
      "headers": {
        "Cache-Control": "public, max-age=31536000, immutable"
      }
    },
    {
      "src": "/favicon.ico",
      "dest": "/public/favicon.ico"
    },
    {
      "src": "/(.*)",
      "dest": "/api/index.js"
    }
  ],
  "env": {
    "NODE_ENV": "production",
    "SHOPIFY_APP_URL": "https://shopifyscript-shopify-ui.vercel.app",
    "SHOPIFY_API_KEY": "@shopify_api_key",
    "SHOPIFY_API_SECRET": "@shopify_api_secret",
    "SCOPES": "read_products,write_products",
    "BACKEND_PUBLIC_URL": "https://shopifyscript-backend.vercel.app/api",
    "KV_URL": "@kv_url",
    "SESSION_SECRET": "@session_secret",
    "HMAC_SECRET": "@hmac_secret"
  }
}
