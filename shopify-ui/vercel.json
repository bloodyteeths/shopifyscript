{
  "version": 2,
  "installCommand": "npm i --no-audit --no-fund",
  "buildCommand": "npm run build",
  "builds": [
    {
      "src": "api/index.js",
      "use": "@vercel/node",
      "config": {
        "maxLambdaSize": "50mb",
        "runtime": "nodejs18.x"
      }
    },
    {
      "src": "public/**",
      "use": "@vercel/static"
    }
  ],
  "routes": [
    {
      "src": "/build/(.*)",
      "dest": "/public/build/$1",
      "headers": {
        "Cache-Control": "public, max-age=31536000, immutable"
      }
    },
    {
      "src": "/favicon.ico",
      "dest": "/public/favicon.ico"
    },
    {
      "src": "/(.*)",
      "dest": "/api/index.js"
    }
  ],
  "env": {
    "NODE_ENV": "production",
    "SHOPIFY_APP_URL": "https://shopifyscript-shopify-ui.vercel.app",
    "SCOPES": "read_products,write_products",
    "BACKEND_PUBLIC_URL": "https://shopifyscript-backend.vercel.app/api",
    "KV_URL": "@redis-ads-autopilot-ai-kv-url",
    "KV_REST_API_URL": "@redis-ads-autopilot-ai-kv-rest-api-url",
    "KV_REST_API_TOKEN": "@redis-ads-autopilot-ai-kv-rest-api-token",
    "KV_REST_API_READ_ONLY_TOKEN": "@redis-ads-autopilot-ai-kv-rest-api-read-only-token"
  }
}
